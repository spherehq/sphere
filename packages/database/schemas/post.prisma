enum POST_STATUS {
  PUBLISHED
  DRAFT
  ARCHIVED
  SYNCING
}

type Post {
  id: ID! @unique
  title: String!
  featuredImage: Image
  content: Json!
  slug: String! @unique
  timeToRead: Int! @default(value: 1)
  isPublished: Boolean! @default(value: false)
  publishedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  status: POST_STATUS! @default(value: DRAFT)
  author: Account!
  metadata: PostMetadata!
    @relation(name: "MetadataAssociatedWithPost", onDelete: CASCADE)
  associatedWith: Sphere!
    @relation(name: "PostAssociatedWithSphere", onDelete: CASCADE)
}

type Image {
  id: ID! @unique
  filename: String!
  alt: String! @default(value: "")
  url: String!
  urlAlias: String! # internal reference for preserving local file paths - UNSAFE
  fileHash: String!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type PostMetadata {
  id: ID! @unique
  fileHash: String! # internal reference for knowing when file changes have occurred since last sync
  filename: String
}
